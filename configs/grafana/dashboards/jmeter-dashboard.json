{
    "dashboard": {
        "title": "JMeter Performance Metrics - REST Benchmark",
        "tags": [
            "jmeter",
            "benchmark",
            "performance"
        ],
        "timezone": "browser",
        "schemaVersion": 16,
        "version": 0,
        "refresh": "5s",
        "panels": [
            {
                "id": 1,
                "title": "Requests Per Second (RPS)",
                "type": "graph",
                "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 0
                },
                "datasource": "InfluxDB",
                "targets": [
                    {
                        "query": "from(bucket: \"jmeter\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"jmeter\")\n  |> filter(fn: (r) => r[\"_field\"] == \"count\")\n  |> filter(fn: (r) => r[\"statut\"] == \"ok\")\n  |> aggregateWindow(every: 5s, fn: sum)\n  |> derivative(unit: 1s, nonNegative: true)",
                        "refId": "A"
                    }
                ],
                "yaxes": [
                    {
                        "format": "short",
                        "label": "RPS"
                    },
                    {
                        "format": "short"
                    }
                ]
            },
            {
                "id": 2,
                "title": "Response Time - p50/p95/p99",
                "type": "graph",
                "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 0
                },
                "datasource": "InfluxDB",
                "targets": [
                    {
                        "query": "from(bucket: \"jmeter\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"jmeter\")\n  |> filter(fn: (r) => r[\"_field\"] == \"pct50.0\" or r[\"_field\"] == \"pct95.0\" or r[\"_field\"] == \"pct99.0\")\n  |> aggregateWindow(every: 10s, fn: mean)",
                        "refId": "A"
                    }
                ],
                "yaxes": [
                    {
                        "format": "ms",
                        "label": "Response Time"
                    },
                    {
                        "format": "short"
                    }
                ]
            },
            {
                "id": 3,
                "title": "Error Rate %",
                "type": "graph",
                "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 8
                },
                "datasource": "InfluxDB",
                "targets": [
                    {
                        "query": "from(bucket: \"jmeter\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"jmeter\")\n  |> filter(fn: (r) => r[\"_field\"] == \"count\")\n  |> filter(fn: (r) => r[\"statut\"] == \"ko\")\n  |> aggregateWindow(every: 10s, fn: sum)",
                        "refId": "A"
                    }
                ],
                "yaxes": [
                    {
                        "format": "percent",
                        "label": "Error Rate"
                    },
                    {
                        "format": "short"
                    }
                ]
            },
            {
                "id": 4,
                "title": "Active Threads",
                "type": "graph",
                "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 8
                },
                "datasource": "InfluxDB",
                "targets": [
                    {
                        "query": "from(bucket: \"jmeter\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"jmeter\")\n  |> filter(fn: (r) => r[\"_field\"] == \"maxAT\" or r[\"_field\"] == \"minAT\")\n  |> aggregateWindow(every: 5s, fn: mean)",
                        "refId": "A"
                    }
                ],
                "yaxes": [
                    {
                        "format": "short",
                        "label": "Threads"
                    },
                    {
                        "format": "short"
                    }
                ]
            },
            {
                "id": 5,
                "title": "Throughput (Bytes/sec)",
                "type": "graph",
                "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 16
                },
                "datasource": "InfluxDB",
                "targets": [
                    {
                        "query": "from(bucket: \"jmeter\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"jmeter\")\n  |> filter(fn: (r) => r[\"_field\"] == \"rb\")\n  |> aggregateWindow(every: 5s, fn: sum)\n  |> derivative(unit: 1s, nonNegative: true)",
                        "refId": "A"
                    }
                ],
                "yaxes": [
                    {
                        "format": "Bps",
                        "label": "Throughput"
                    },
                    {
                        "format": "short"
                    }
                ]
            },
            {
                "id": 6,
                "title": "Response Time - Average",
                "type": "graph",
                "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 16
                },
                "datasource": "InfluxDB",
                "targets": [
                    {
                        "query": "from(bucket: \"jmeter\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"jmeter\")\n  |> filter(fn: (r) => r[\"_field\"] == \"avg\")\n  |> aggregateWindow(every: 10s, fn: mean)",
                        "refId": "A"
                    }
                ],
                "yaxes": [
                    {
                        "format": "ms",
                        "label": "Avg Response Time"
                    },
                    {
                        "format": "short"
                    }
                ]
            },
            {
                "id": 7,
                "title": "Success vs Errors",
                "type": "stat",
                "gridPos": {
                    "h": 4,
                    "w": 6,
                    "x": 0,
                    "y": 24
                },
                "datasource": "InfluxDB",
                "targets": [
                    {
                        "query": "from(bucket: \"jmeter\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"jmeter\")\n  |> filter(fn: (r) => r[\"_field\"] == \"count\")\n  |> filter(fn: (r) => r[\"statut\"] == \"ok\")\n  |> sum()",
                        "refId": "A"
                    }
                ],
                "options": {
                    "colorMode": "value",
                    "graphMode": "area",
                    "justifyMode": "auto"
                }
            },
            {
                "id": 8,
                "title": "Request Statistics - Table",
                "type": "table",
                "gridPos": {
                    "h": 8,
                    "w": 18,
                    "x": 6,
                    "y": 24
                },
                "datasource": "InfluxDB",
                "targets": [
                    {
                        "query": "from(bucket: \"jmeter\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"jmeter\")\n  |> filter(fn: (r) => r[\"_field\"] == \"count\" or r[\"_field\"] == \"avg\" or r[\"_field\"] == \"pct95.0\")\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")",
                        "refId": "A"
                    }
                ]
            }
        ]
    }
}